(function(){var e,t,n,i,r,o,s,a,h,l,u,c,f,d,p,v,g,m,y,S,w,k,x,b,E,F,_,z,O,P,T,N,$,I,A=function(e){var t=new A.Index;return t.pipeline.add(A.trimmer,A.stopWordFilter,A.stemmer),e&&e.call(t,t),t};A.version="0.7.2",A.utils={},A.utils.warn=(e=this,function(t){e.console&&console.warn&&console.warn(t)}),A.utils.asString=function(e){return null==e?"":e.toString()},A.EventEmitter=function(){this.events={}},A.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},A.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);this.events[e].splice(n,1),this.events[e].length||delete this.events[e]}},A.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},A.EventEmitter.prototype.hasHandler=function(e){return e in this.events},A.tokenizer=function(e){if(!arguments.length||null==e||null==e)return[];if(Array.isArray(e))return e.map(function(e){return A.utils.asString(e).toLowerCase()});var t=A.tokenizer.seperator||A.tokenizer.separator;return e.toString().trim().toLowerCase().split(t)},A.tokenizer.seperator=!1,A.tokenizer.separator=/[\s\-]+/,A.tokenizer.load=function(e){var t=this.registeredFunctions[e];if(!t)throw new Error("Cannot load un-registered function: "+e);return t},A.tokenizer.label="default",A.tokenizer.registeredFunctions={default:A.tokenizer},A.tokenizer.registerFunction=function(e,t){t in this.registeredFunctions&&A.utils.warn("Overwriting existing tokenizer: "+t),e.label=t,this.registeredFunctions[t]=e},A.Pipeline=function(){this._stack=[]},A.Pipeline.registeredFunctions={},A.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&A.utils.warn("Overwriting existing registered function: "+t),e.label=t,A.Pipeline.registeredFunctions[e.label]=e},A.Pipeline.warnIfFunctionNotRegistered=function(e){var t=e.label&&e.label in this.registeredFunctions;t||A.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},A.Pipeline.load=function(e){var t=new A.Pipeline;return e.forEach(function(e){var n=A.Pipeline.registeredFunctions[e];if(!n)throw new Error("Cannot load un-registered function: "+e);t.add(n)}),t},A.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){A.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},A.Pipeline.prototype.after=function(e,t){A.Pipeline.warnIfFunctionNotRegistered(t);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");n+=1,this._stack.splice(n,0,t)},A.Pipeline.prototype.before=function(e,t){A.Pipeline.warnIfFunctionNotRegistered(t);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");this._stack.splice(n,0,t)},A.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},A.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._stack.length,r=0;r<n;r++){for(var o=e[r],s=0;s<i&&(o=this._stack[s](o,r,e),void 0!==o&&""!==o);s++);void 0!==o&&""!==o&&t.push(o)}return t},A.Pipeline.prototype.reset=function(){this._stack=[]},A.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return A.Pipeline.warnIfFunctionNotRegistered(e),e.label})},A.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},A.Vector.Node=function(e,t,n){this.idx=e,this.val=t,this.next=n},A.Vector.prototype.insert=function(e,t){this._magnitude=void 0;var n=this.list;if(!n)return this.list=new A.Vector.Node(e,t,n),this.length++;if(e<n.idx)return this.list=new A.Vector.Node(e,t,n),this.length++;for(var i=n,r=n.next;null!=r;){if(e<r.idx)return i.next=new A.Vector.Node(e,t,r),this.length++;i=r,r=r.next}return i.next=new A.Vector.Node(e,t,r),this.length++},A.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=this.list,n=0;t;)e=t.val,n+=e*e,t=t.next;return this._magnitude=Math.sqrt(n)},A.Vector.prototype.dot=function(e){for(var t=this.list,n=e.list,i=0;t&&n;)t.idx<n.idx?t=t.next:t.idx>n.idx?n=n.next:(i+=t.val*n.val,t=t.next,n=n.next);return i},A.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},A.SortedSet=function(){this.length=0,this.elements=[]},A.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},A.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},A.SortedSet.prototype.toArray=function(){return this.elements.slice()},A.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},A.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},A.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,i=n-t,r=t+Math.floor(i/2),o=this.elements[r];i>1;){if(o===e)return r;o<e&&(t=r),o>e&&(n=r),i=n-t,r=t+Math.floor(i/2),o=this.elements[r]}return o===e?r:-1},A.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,i=n-t,r=t+Math.floor(i/2),o=this.elements[r];i>1;)o<e&&(t=r),o>e&&(n=r),i=n-t,r=t+Math.floor(i/2),o=this.elements[r];return o>e?r:o<e?r+1:void 0},A.SortedSet.prototype.intersect=function(e){for(var t=new A.SortedSet,n=0,i=0,r=this.length,o=e.length,s=this.elements,a=e.elements;!(n>r-1||i>o-1);)s[n]!==a[i]?s[n]<a[i]?n++:s[n]>a[i]&&i++:(t.add(s[n]),n++,i++);return t},A.SortedSet.prototype.clone=function(){var e=new A.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},A.SortedSet.prototype.union=function(e){var t,n,i;this.length>=e.length?(t=this,n=e):(t=e,n=this),i=t.clone();for(var r=0,o=n.toArray();r<o.length;r++)i.add(o[r]);return i},A.SortedSet.prototype.toJSON=function(){return this.toArray()},A.Index=function(){this._fields=[],this._ref="id",this.pipeline=new A.Pipeline,this.documentStore=new A.Store,this.tokenStore=new A.TokenStore,this.corpusTokens=new A.SortedSet,this.eventEmitter=new A.EventEmitter,this.tokenizerFn=A.tokenizer,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},A.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},A.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},A.Index.load=function(e){e.version!==A.version&&A.utils.warn("version mismatch: current "+A.version+" importing "+e.version);var t=new this;return t._fields=e.fields,t._ref=e.ref,t.tokenizer(A.tokenizer.load(e.tokenizer)),t.documentStore=A.Store.load(e.documentStore),t.tokenStore=A.TokenStore.load(e.tokenStore),t.corpusTokens=A.SortedSet.load(e.corpusTokens),t.pipeline=A.Pipeline.load(e.pipeline),t},A.Index.prototype.field=function(e,t){t=t||{};var n={name:e,boost:t.boost||1};return this._fields.push(n),this},A.Index.prototype.ref=function(e){return this._ref=e,this},A.Index.prototype.tokenizer=function(e){var t=e.label&&e.label in A.tokenizer.registeredFunctions;return t||A.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=e,this},A.Index.prototype.add=function(e,t){var n={},i=new A.SortedSet,r=e[this._ref];t=void 0===t||t;this._fields.forEach(function(t){var r=this.pipeline.run(this.tokenizerFn(e[t.name]));n[t.name]=r;for(var o=0;o<r.length;o++){var s=r[o];i.add(s),this.corpusTokens.add(s)}},this),this.documentStore.set(r,i);for(var o=0;o<i.length;o++){for(var s=i.elements[o],a=0,h=0;h<this._fields.length;h++){var l=this._fields[h],u=n[l.name],c=u.length;if(c){for(var f=0,d=0;d<c;d++)u[d]===s&&f++;a+=f/c*l.boost}}this.tokenStore.add(s,{ref:r,tf:a})}t&&this.eventEmitter.emit("add",e,this)},A.Index.prototype.remove=function(e,t){var n=e[this._ref];t=void 0===t||t;if(this.documentStore.has(n)){var i=this.documentStore.get(n);this.documentStore.remove(n),i.forEach(function(e){this.tokenStore.remove(e,n)},this),t&&this.eventEmitter.emit("remove",e,this)}},A.Index.prototype.update=function(e,t){t=void 0===t||t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},A.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var n=this.tokenStore.count(e),i=1;return n>0&&(i=1+Math.log(this.documentStore.length/n)),this._idfCache[t]=i},A.Index.prototype.search=function(e){var t=this.pipeline.run(this.tokenizerFn(e)),n=new A.Vector,i=[],r=this._fields.reduce(function(e,t){return e+t.boost},0),o=t.some(function(e){return this.tokenStore.has(e)},this);if(!o)return[];t.forEach(function(e,t,o){var s=1/o.length*this._fields.length*r,a=this,h=this.tokenStore.expand(e).reduce(function(t,i){var r=a.corpusTokens.indexOf(i),o=a.idf(i),h=1,l=new A.SortedSet;if(i!==e){var u=Math.max(3,i.length-e.length);h=1/Math.log(u)}r>-1&&n.insert(r,s*o*h);for(var c=a.tokenStore.get(i),f=Object.keys(c),d=f.length,p=0;p<d;p++)l.add(c[f[p]].ref);return t.union(l)},new A.SortedSet);i.push(h)},this);var s=i.reduce(function(e,t){return e.intersect(t)});return s.map(function(e){return{ref:e,score:n.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})},A.Index.prototype.documentVector=function(e){for(var t=this.documentStore.get(e),n=t.length,i=new A.Vector,r=0;r<n;r++){var o=t.elements[r],s=this.tokenStore.get(o)[e].tf,a=this.idf(o);i.insert(this.corpusTokens.indexOf(o),s*a)}return i},A.Index.prototype.toJSON=function(){return{version:A.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},A.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},A.Store=function(){this.store={},this.length=0},A.Store.load=function(e){var t=new this;return t.length=e.length,t.store=Object.keys(e.store).reduce(function(t,n){return t[n]=A.SortedSet.load(e.store[n]),t},{}),t},A.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},A.Store.prototype.get=function(e){return this.store[e]},A.Store.prototype.has=function(e){return e in this.store},A.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},A.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},A.stemmer=(t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},n={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[^aeiou]",r="[aeiouy]",o=i+"[^aeiouy]*",s=r+"[aeiou]*",a="^("+o+")?"+s+o,h="^("+o+")?"+s+o+"("+s+")?$",l="^("+o+")?"+s+o+s+o,u="^("+o+")?"+r,c=new RegExp(a),f=new RegExp(l),d=new RegExp(h),p=new RegExp(u),v=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,y=/^(.+?)(ed|ing)$/,S=/.$/,w=/(at|bl|iz)$/,k=new RegExp("([^aeiouylsz])\\1$"),x=new RegExp("^"+o+r+"[^aeiouwxy]$"),b=/^(.+?[^aeiou])y$/,E=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,F=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,_=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,z=/^(.+?)(s|t)(ion)$/,O=/^(.+?)e$/,P=/ll$/,T=new RegExp("^"+o+r+"[^aeiouwxy]$"),N=function(e){var i,r,o,s,a,h,l;if(e.length<3)return e;if(o=e.substr(0,1),"y"==o&&(e=o.toUpperCase()+e.substr(1)),s=v,a=g,s.test(e)?e=e.replace(s,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),s=m,a=y,s.test(e)){var u=s.exec(e);s=c,s.test(u[1])&&(s=S,e=e.replace(s,""))}else if(a.test(e)){u=a.exec(e);i=u[1],a=p,a.test(i)&&(e=i,a=w,h=k,l=x,a.test(e)?e+="e":h.test(e)?(s=S,e=e.replace(s,"")):l.test(e)&&(e+="e"))}if(s=b,s.test(e)){u=s.exec(e);i=u[1],e=i+"i"}if(s=E,s.test(e)){u=s.exec(e);i=u[1],r=u[2],s=c,s.test(i)&&(e=i+t[r])}if(s=F,s.test(e)){u=s.exec(e);i=u[1],r=u[2],s=c,s.test(i)&&(e=i+n[r])}if(s=_,a=z,s.test(e)){u=s.exec(e);i=u[1],s=f,s.test(i)&&(e=i)}else if(a.test(e)){u=a.exec(e);i=u[1]+u[2],a=f,a.test(i)&&(e=i)}if(s=O,s.test(e)){u=s.exec(e);i=u[1],s=f,a=d,h=T,(s.test(i)||a.test(i)&&!h.test(i))&&(e=i)}return s=P,a=f,s.test(e)&&a.test(e)&&(s=S,e=e.replace(s,"")),"y"==o&&(e=o.toLowerCase()+e.substr(1)),e},N),A.Pipeline.registerFunction(A.stemmer,"stemmer"),A.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e]!==e)return e}},A.stopWordFilter=A.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),A.Pipeline.registerFunction(A.stopWordFilter,"stopWordFilter"),A.trimmer=function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")},A.Pipeline.registerFunction(A.trimmer,"trimmer"),A.TokenStore=function(){this.root={docs:{}},this.length=0},A.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},A.TokenStore.prototype.add=function(e,t,n){n=n||this.root;var i=e.charAt(0),r=e.slice(1);return i in n||(n[i]={docs:{}}),0===r.length?(n[i].docs[t.ref]=t,void(this.length+=1)):this.add(r,t,n[i])},A.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e.charAt(n)])return!1;t=t[e.charAt(n)]}return!0},A.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,n=0;n<e.length;n++){if(!t[e.charAt(n)])return{};t=t[e.charAt(n)]}return t},A.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},A.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},A.TokenStore.prototype.remove=function(e,t){if(e){for(var n=this.root,i=0;i<e.length;i++){if(!(e.charAt(i)in n))return;n=n[e.charAt(i)]}delete n.docs[t]}},A.TokenStore.prototype.expand=function(e,t){var n=this.getNode(e),i=n.docs||{};t=t||[];return Object.keys(i).length&&t.push(e),Object.keys(n).forEach(function(n){"docs"!==n&&t.concat(this.expand(e+n,t))},this),t},A.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},$=this,I=function(){return A},"function"==typeof define&&define.amd?define(I):"object"==typeof exports?module.exports=I():$.lunr=I()})();